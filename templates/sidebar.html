{% load static %}
<aside class="sidebar" id="mainSidebar">
    <script>
        if (localStorage.getItem('sidebar_collapsed') === 'true') {
            document.getElementById('mainSidebar').classList.add('collapsed');
        }
    </script>
    <div class="sidebar-header">
        <img src="{% static 'img/logo.png' %}" alt="Logo" class="sidebar-logo-img">
        <span class="sidebar-brand-text">SIGETH</span>
    </div>

    <ul class="sidebar-menu">
        <li>
            <a href="{% url 'core:dashboard' %}"
               class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                <i class="fa-solid fa-home"></i>
                <span class="menu-text">Inicio</span>
            </a>
        </li>
        <li>
            <!-- Usamos 'in' para que se mantenga activo en crear/editar también -->
            <a href="{% url 'person:person_list' %}"
               class="{% if 'person' in request.resolver_match.app_name %}active{% endif %}">
                <i class="fa-solid fa-users"></i>
                <span class="menu-text">Personas</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class="fa-solid fa-users"></i>
                <span class="menu-text">Empleados</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class="fa-solid fa-file-invoice-dollar"></i>
                <span class="menu-text">Nómina</span>
            </a>
        </li>

        <!-- MENÚ PADRE: Ajustes -->
        <!-- Quitamos :class y @click. El JS detecta la clase 'has-submenu' -->
        <li class="has-submenu">
            <a href="#">
                <i class="fa-solid fa-gear"></i>
                <span class="menu-text">Ajustes</span>
                <i class="fa-solid fa-chevron-right chevron-icon"></i>
            </a>

            <!-- SUBMENÚ: Quitamos v-show. El CSS lo muestra cuando el li padre tiene clase 'open' -->
            <ul class="submenu">
                <li class="submenu-title">Ajustes</li>
                <li>
                    <a href="{% url 'security:user_list' %}">
                        <i class="fa-solid fa-user-shield"></i>
                        <span class="menu-text">Usuarios Sistema</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'security:role_list' %}">
                        <i class="fa-solid fa-user-lock"></i>
                        <span class="menu-text">Roles y Permisos</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'core:catalog_list' %}">
                        <i class="fa-solid fa-list-check"></i>
                        <span class="menu-text">Catálogos</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'core:location_list' %}">
                        <i class="fa-solid fa-map-location"></i>
                        <span class="menu-text">Ubicaciones</span>
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</aside>