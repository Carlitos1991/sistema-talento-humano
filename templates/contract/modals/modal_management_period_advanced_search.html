<div class="modal-overlay" v-if="showAdvancedModal" v-cloak @click.self="closeAdvancedModal">
    <div class="modal-container-medium" style="width: 850px; margin: auto;">
        <div class="modal-header-medium modal-header-gradient">
            <h3 class="modal-title text-white">
                <i class="fa-solid fa-magnifying-glass-plus me-2"></i> Búsqueda Avanzada de Gestión
            </h3>
            <button type="button" class="btn-close-modal text-white-opacity" @click="closeAdvancedModal">&times;
            </button>
        </div>

        <div class="modal-body-content modal-body-custom">
            <!-- Sección: Datos del Empleado -->
            <div class="section-title">
                <i class="fas fa-user-tie"></i> Información del Personal
            </div>
            <div class="form-section-card">
                <div class="grid-2-cols">
                    <div class="form-group">
                        <label class="form-label">Nombre o Cédula</label>
                        <input type="text" v-model="advancedFilters.q" class="input-field"
                               placeholder="Ej: 1712345678 o Juan Pérez">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Unidad Administrativa</label>
                        <select v-model="advancedFilters.unit" class="input-field">
                            <option value="">Todas las dependencias</option>
                            {% for unit in units %}
                                <option value="{{ unit.id }}">{{ unit.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <!-- Sección: Datos del Contrato -->
            <div class="section-title mt-3">
                <i class="fas fa-file-contract"></i> Detalles del Vínculo
            </div>
            <div class="form-section-card">
                <div class="grid-3-cols">
                    <div class="form-group">
                        <label class="form-label">Régimen Laboral</label>
                        <select v-model="advancedFilters.regime" class="input-field">
                            <option value="">Todos</option>
                            {% for regime in regimes %}
                                <option value="{{ regime.id }}">{{ regime.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nro. Documento / Acción</label>
                        <input type="text" v-model="advancedFilters.doc_number" class="input-field"
                               placeholder="Ej: MUN-2024-...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Estado de Gestión</label>
                        <select v-model="advancedFilters.status_code" class="input-field">
                            <option value="">Cualquier estado</option>
                            <option value="SIN_FIRMAR">Sin Firmar</option>
                            <option value="FIRMADO">Firmado / Legalizado</option>
                            <option value="FINALIZADO">Finalizado</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Sección: Rango de Fechas -->
            <div class="section-title mt-3">
                <i class="fas fa-calendar-day"></i> Rango de Vigencia (Inicio)
            </div>
            <div class="form-section-card">
                <div class="grid-2-cols">
                    <div class="form-group">
                        <label class="form-label">Desde</label>
                        <input type="date" v-model="advancedFilters.date_from" class="input-field">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Hasta</label>
                        <input type="date" v-model="advancedFilters.date_to" class="input-field">
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-footer-medium modal-footer-spaced">
            <button type="button" class="btn-cancel" @click="resetAdvancedFilters">
                <i class="fas fa-eraser me-2"></i> Limpiar Filtros
            </button>
            <button type="button" class="btn-save" @click="applyAdvancedSearch">
                <i class="fas fa-search me-2"></i> Ejecutar Búsqueda
            </button>
        </div>
    </div>
</div>