<div v-if="showTimeModal" class="modal-overlay" @click.self="closeTimeModal">
    <div class="modal-container-medium" style="max-width: 550px;">
        <div class="modal-header-gradient">
            <div class="header-content-group">
                <div class="header-icon-circle"><i class="fa-solid fa-clock"></i></div>
                <h3 class="header-title-main">Actualizar Hora del Biom√©trico</h3>
            </div>
            <button @click="closeTimeModal" class="btn-close-modal-refined">&times;</button>
        </div>

        <div class="modal-body-custom">
            <!-- Card de Info Tiempos -->
            <div class="swal-connection-box" style="margin-top: 0; margin-bottom: 20px;">
                <div class="swal-connection-details">
                    <div class="swal-connection-item"><strong>Dispositivo:</strong> [[ timeData.name ]]</div>
                    <div class="swal-connection-item"><strong>Hora Actual del Dispositivo:</strong>
                        <span :class="timeData.device_time.includes('Error') ? 'text-danger' : ''">[[ timeData.device_time ]]</span>
                    </div>
                    <div class="swal-connection-item"><strong>Hora del Servidor:</strong> [[ timeData.server_time ]]</div>
                </div>
            </div>

            <!-- Opciones de Radio -->
            <div class="form-section-card">
                <div class="form-group mb-3">
                    <label class="d-flex align-items-center gap-2 cursor-pointer">
                        <input type="radio" v-model="timeForm.mode" value="server">
                        <span>Sincronizar con hora del servidor</span>
                    </label>
                </div>
                <div class="form-group">
                    <label class="d-flex align-items-center gap-2 cursor-pointer">
                        <input type="radio" v-model="timeForm.mode" value="custom">
                        <span>Establecer hora personalizada</span>
                    </label>
                </div>

                <!-- Input de Fecha (Solo si es personalizado) -->
                <div v-if="timeForm.mode === 'custom'" class="mt-3 animate__animated animate__fadeIn">
                    <label class="form-label">Fecha y Hora:</label>
                    <input type="datetime-local" v-model="timeForm.custom_time" class="form-control">
                </div>
            </div>
        </div>

        <div class="modal-footer-fixed">
            <button @click="closeTimeModal" class="btn-cancel" style="min-width: 120px;">Cancelar</button>
            <button @click="saveTime" class="btn-save" :disabled="isSavingTime" style="min-width: 180px;">
                <i :class="isSavingTime ? 'fa-solid fa-spinner fa-spin' : 'fa-solid fa-arrows-rotate'"></i>
                [[ isSavingTime ? 'Actualizando...' : 'Actualizar Hora' ]]
            </button>
        </div>
    </div>
</div>