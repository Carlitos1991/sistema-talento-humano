<div v-if="showTimeModal" class="modal-overlay" @click.self="closeTimeModal">
    <div class="modal-container-medium time-modal-container">
        <!-- Header con gradiente azul -->
        <div class="time-modal-header">
            <div class="time-modal-header-content">
                <div class="time-modal-icon">
                    <i class="fa-solid fa-clock fa-xl"></i>
                </div>
                <div>
                    <h3 class="time-modal-title">Sincronización de Hora</h3>
                    <p class="time-modal-subtitle">[[ timeData.name ]]</p>
                </div>
            </div>
            <button @click="closeTimeModal" class="btn-close-modal-refined" style="color: white;">&times;</button>
        </div>

        <div class="time-modal-body">
            <!-- Comparación de horas con diseño moderno -->
            <div class="time-comparison-grid">
                <!-- Hora del Dispositivo -->
                <div class="time-card-device">
                    <div class="time-card-header">
                        <i class="fa-solid fa-fingerprint time-card-icon-device"></i>
                        <span class="time-card-label-device">Biométrico</span>
                    </div>
                    <div v-if="!timeData.device_time.includes('Error')" class="time-card-time">
                        [[ timeData.device_time.split(' ')[1] ]]
                    </div>
                    <div v-else class="time-card-error">
                        <i class="fa-solid fa-triangle-exclamation"></i> Sin conexión
                    </div>
                    <div v-if="!timeData.device_time.includes('Error')" class="time-card-date">
                        [[ timeData.device_time.split(' ')[0] ]]
                    </div>
                </div>

                <!-- Hora del Servidor -->
                <div class="time-card-server">
                    <div class="time-card-header">
                        <i class="fa-solid fa-server time-card-icon-server"></i>
                        <span class="time-card-label-server">Servidor</span>
                    </div>
                    <div class="time-card-time-server">
                        [[ timeData.server_time.split(' ')[1] ]]
                    </div>
                    <div class="time-card-date-server">
                        [[ timeData.server_time.split(' ')[0] ]]
                    </div>
                </div>
            </div>

            <!-- Opciones de sincronización -->
            <div class="time-sync-options">
                <h6 class="time-sync-title">
                    <i class="fa-solid fa-gear"></i> Opciones de Sincronización
                </h6>
                
                <!-- Opción: Sincronizar con servidor -->
                <label class="time-radio-option" :class="{'selected': timeForm.mode === 'server'}" @click="timeForm.mode = 'server'">
                    <input type="radio" v-model="timeForm.mode" value="server">
                    <div class="time-radio-content">
                        <div class="time-radio-label">
                            <i class="fa-solid fa-cloud-arrow-down"></i> Sincronizar con servidor
                        </div>
                        <div class="time-radio-description">
                            Establece automáticamente la hora del servidor en el dispositivo
                        </div>
                    </div>
                </label>

                <!-- Opción: Hora personalizada -->
                <label class="time-radio-option" :class="{'selected': timeForm.mode === 'custom'}" @click="timeForm.mode = 'custom'">
                    <input type="radio" v-model="timeForm.mode" value="custom">
                    <div class="time-radio-content">
                        <div class="time-radio-label">
                            <i class="fa-solid fa-pen-to-square"></i> Hora personalizada
                        </div>
                        <div class="time-radio-description">
                            Define manualmente la fecha y hora que deseas establecer
                        </div>
                    </div>
                </label>

                <!-- Input de Fecha (Solo si es personalizado) -->
                <div v-if="timeForm.mode === 'custom'" class="time-custom-input-wrapper">
                    <label class="time-custom-label">
                        <i class="fa-regular fa-calendar"></i> Fecha y Hora:
                    </label>
                    <input type="datetime-local" 
                           v-model="timeForm.custom_time" 
                           class="time-custom-input">
                </div>
            </div>
        </div>

        <!-- Footer con botones -->
        <div class="time-modal-footer">
            <button @click="closeTimeModal" class="time-btn-cancel">
                <i class="fa-solid fa-xmark"></i> Cancelar
            </button>
            <button @click="saveTime" :disabled="isSavingTime" class="time-btn-update">
                <i :class="isSavingTime ? 'fa-solid fa-spinner fa-spin' : 'fa-solid fa-clock-rotate-left'"></i>
                [[ isSavingTime ? 'Actualizando...' : 'Actualizar Hora' ]]
            </button>
        </div>
    </div>
</div>