{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div id="employeeWizardApp" v-cloak class="container-fluid py-4">

        <!-- 1. BANNER PREMIUM (Nombre y Cargo siempre visibles) -->
        <div class="wizard-banner-premium">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <span class="text-white-50 small fw-bold text-uppercase">Expediente Digital</span>
                    <h1>{{ person.full_name }}</h1>
                    <div class="d-flex gap-2">
                        <span class="banner-badge-info"><i
                                class="fa-solid fa-id-card me-2"></i>{{ person.document_number }}</span>
                        <span class="banner-badge-info"><i
                                class="fa-solid fa-briefcase me-2"></i>{{ person.employee_profile.area.name|default:"SIN ÁREA ASIGNADA" }}</span>
                    </div>
                </div>
                <div class="header-actions">
                    <a href="{% url 'person:person_list' %}" class="btn-header btn-header-back">
                        <i class="fa-solid fa-arrow-left"></i> VOLVER
                    </a>
                    <button class="btn-header btn-header-edit" style="background: #fbbf24; color: #78350f;">
                        <i class="fa-solid fa-user-pen"></i> EDITAR PERFIL
                    </button>
                </div>
            </div>
        </div>

        <!-- 2. NAVEGACIÓN (Colores Dinámicos) -->
        <div class="module-grid-premium">
            <div v-for="tab in tabs" :key="tab.id"
                 @click="activeTab = tab.id"
                 :class="['module-card-item', activeTab === tab.id ? tab.activeClass : '']">
                <i :class="tab.icon" :style="{ color: activeTab === tab.id ? tab.color : '#94a3b8' }"></i>
                <span :style="{ color: activeTab === tab.id ? '#1e293b' : '#64748b' }">[[ tab.name ]]</span>
            </div>
        </div>

        <!-- 3. CUERPO DINÁMICO -->
        <div class="animate__animated animate__fadeIn">

            <!-- PESTAÑA: DATOS PERSONALES -->
            <div v-if="activeTab === 'personal'">
                <div class="section-card-standard border-0 shadow-sm p-5 text-center">
                    <div class="profile-avatar-wrapper">
                        {% if person.photo %}
                            <img src="{{ person.photo.url }}" class="profile-avatar-img">
                        {% else %}
                            <div class="profile-avatar-img bg-light d-flex align-items-center justify-content-center">
                                <i class="fa-solid fa-user fa-5x text-secondary"></i>
                            </div>
                        {% endif %}
                        <span class="status-badge active position-absolute bottom-0 end-0 px-3 shadow">ACTIVO</span>
                    </div>
                    <h2 class="text-primary-bold mb-1" style="font-size: 2rem;">{{ person.full_name }}</h2>
                    <p class="text-muted mb-5">Empleado Institucional
                        desde {{ person.employee_profile.date_joined|date:"Y"|default:"-" }}</p>

                    <div class="row g-4 text-start">
                        <div class="col-md-4">
                            <div class="info-box-styled" style="border-color: #3b82f6;">
                                <h6 class="section-title small text-primary"><i class="fa-solid fa-user me-2"></i>Identidad
                                </h6>
                                <p class="mb-1 small text-muted">GÉNERO: <strong>{{ person.gender.name }}</strong></p>
                                <p class="mb-0 small text-muted">EDAD: <strong>{{ person.age }} Años</strong></p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="info-box-styled" style="border-color: #0ea5e9;">
                                <h6 class="section-title small text-info"><i class="fa-solid fa-phone me-2"></i>Contacto
                                </h6>
                                <p class="mb-1 small text-muted">EMAIL: <strong>{{ person.email }}</strong></p>
                                <p class="mb-0 small text-muted">CELULAR: <strong>{{ person.phone_number }}</strong></p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="info-box-styled" style="border-color: #f59e0b;">
                                <h6 class="section-title small text-warning"><i
                                        class="fa-solid fa-location-dot me-2"></i>Ubicación</h6>
                                <p class="mb-0 small text-muted"><strong>{{ person.province.name }}
                                    / {{ person.canton.name }}</strong></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PESTAÑA: CURRICULUM -->
            <div v-if="activeTab === 'curriculum'">
                {% include 'employees/partials/wizard/tab_curriculum.html' %}
            </div>

            <!-- PESTAÑA: ECONÓMICOS -->
            <div v-if="activeTab === 'economic'">
                {% include 'employees/partials/wizard/tab_economic_data.html' %}
            </div>

        </div>
    </div>
{% endblock %}